(this.webpackJsonpemailsender=this.webpackJsonpemailsender||[]).push([[0],{21:function(e,t,a){e.exports=a(47)},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),s=a.n(c),l=(a(26),a(27),a(28),a(4)),i=a(5),o=a(3),m=a(7),u=a(8),d=a(1),p=a.n(d),h=a(6),f=a(20),b=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={cols:[],rows:[]},n.onClear=n.onClear.bind(Object(o.a)(n)),n.onUploadFile=n.onUploadFile.bind(Object(o.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("emails");e&&this.setState(JSON.parse(e))}},{key:"onClear",value:function(e){this.setState({cols:[],rows:[]}),localStorage.removeItem("emails"),this.props.stepChange(1)}},{key:"onUploadFile",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files[0],Object(f.ExcelRenderer)(a,(function(e,t){e?console.log(e):(n.setState({cols:t.cols,rows:t.rows}),localStorage.setItem("emails",JSON.stringify({cols:t.cols,rows:t.rows})),t.rows.length>1&&n.props.stepChange(2))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.state.rows.length>0){var t=this.state.rows[0];return r.a.createElement("div",{className:"card-body"},r.a.createElement("i",{className:"far fa-trash-alt pull-right pointer mt50",onClick:this.onClear}),r.a.createElement("div",{className:"tableFixHead"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,this.state.cols.map((function(e,a){return r.a.createElement("th",{scope:"col",key:a},t[a])})))),r.a.createElement("tbody",null,this.state.rows.map((function(t,a){return a>0&&r.a.createElement("tr",{key:a},e.state.cols.map((function(e,a){return r.a.createElement("td",{scope:"col",key:a},t[a])})))}))))))}return r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text"},"Carga la lista de email desde un fichero excel."),r.a.createElement("div",null,r.a.createElement("input",{type:"file",name:"file",id:"fileExcel",onChange:this.onUploadFile,accept:"application/*",className:"hidden"}),r.a.createElement("div",{className:"btn-group-toggle"},r.a.createElement("label",{htmlFor:"fileExcel",className:"btn btn-outline-primary w-100 "},r.a.createElement("i",{className:"fas fa-upload mr-1"}),"Cargar datos"))))}}]),a}(r.a.Component),v=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).iframe=void 0,n.iframe=r.a.createRef(),n.refreshIframe=n.refreshIframe.bind(Object(o.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.refreshIframe();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.refreshIframe()}},{key:"refreshIframe",value:function(){var e=this.props.body,t=this.props.css,a=this.iframe.current,n=a.contentDocument;n.body.innerHTML=e;try{a.onload=function(e){e.contentWindow&&(e.style.height=e.contentWindow.document.documentElement.scrollHeight+"px")}}catch(s){}var r=n.getElementsByTagName("head")[0],c=n.createElement("style");c.innerHTML=t,r.appendChild(c)}},{key:"render",value:function(){return r.a.createElement("iframe",{className:this.props.className,ref:this.iframe})}}]),a}(r.a.Component),E=a(9),g=a.n(E),y=function(){function e(){Object(l.a)(this,e)}return Object(i.a)(e,null,[{key:"Get",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({method:"get",url:t}).catch((function(e){console.log(e)}));case 2:if(void 0===(a=e.sent)){e.next=7;break}return e.abrupt("return",a.data);case 7:return e.abrupt("return",{wasOk:!1});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"MailjetSend",value:function(){var e=Object(h.a)(p.a.mark((function e(t,a){var n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={Messages:[t]},r=a.split(":"),e.next=4,g()({method:"put",url:"https://api.mailjet.com/v3.1/send",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"},auth:{username:r[0],password:r[1]},data:JSON.stringify(n)}).catch((function(e){console.log(e)}));case 4:if(void 0===(c=e.sent)){e.next=9;break}return e.abrupt("return",c.data);case 9:return e.abrupt("return",{wasOk:!1});case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),k=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={tab:"preview",template:""},n.onTabClick=n.onTabClick.bind(Object(o.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.Get("/template.html");case 2:t=e.sent,this.setState({template:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onTabClick",value:function(e){e.preventDefault(),this.setState({tab:e.currentTarget.dataset.tab})}},{key:"render",value:function(){return r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text"},"A\xf1ade columnas con ","{{COL_NAME}}"),r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item","data-tab":"preview",onClick:this.onTabClick},r.a.createElement("a",{className:"nav-link"+("preview"==this.state.tab?" active":""),href:"#"},"Preview")),r.a.createElement("li",{className:"nav-item","data-tab":"html",onClick:this.onTabClick},r.a.createElement("a",{className:"nav-link"+("html"==this.state.tab?" active":""),href:"#"},"Html"))),r.a.createElement("div",{className:"tab-content",id:"myTabContent"},r.a.createElement("div",{className:"tab-pane fade"+("preview"==this.state.tab?" show active":"")},r.a.createElement(v,{className:"",body:this.state.template,css:""})),r.a.createElement("div",{className:"tab-pane fade"+("html"==this.state.tab?" show active":"")},r.a.createElement("textarea",{className:"html",defaultValue:this.state.template}))))}}]),a}(r.a.Component),w=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n.onSetTestClick=n.onSetTestClick.bind(Object(o.a)(n)),n}return Object(i.a)(a,[{key:"onSetTestClick",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={From:{Name:"info@geoobs.com",Email:"Geoobs"},To:[{Name:"Roberto",Email:"raabril@gmail.com"}],HTMLPart:"Esto es una prueba",TextPart:"Esto es una prueba",Subject:"Test email"},e.next=3,y.MailjetSend(a,"");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text"},"Enviar emails."),r.a.createElement("button",{className:"btn btn-outline-primary ",onClick:this.onSetTestClick},"Enviar"))}}]),a}(r.a.Component),N=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={isLoading:!0,step:3},n.stepChange=n.stepChange.bind(Object(o.a)(n)),n}return Object(i.a)(a,[{key:"stepChange",value:function(e){this.setState({step:e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"blog-header py-3"},r.a.createElement("div",{className:"row flex-nowrap justify-content-between align-items-center"},r.a.createElement("div",{className:"col-4 pt-1"}),r.a.createElement("div",{className:"col-4 text-center"},r.a.createElement("a",{className:"blog-header-logo text-dark",href:"#"},"Mails Sender")),r.a.createElement("div",{className:"col-4 d-flex justify-content-end align-items-center"}))),r.a.createElement("main",{role:"main",className:"container"},r.a.createElement("br",null),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},"1 - Lista de email"),r.a.createElement(b,{stepChange:this.stepChange})),r.a.createElement("div",{className:"card mt-5"},r.a.createElement("div",{className:"card-header"},"2 - Template / Plantilla"),this.state.step>1&&r.a.createElement(k,{stepChange:this.stepChange})),r.a.createElement("div",{className:"card mt-5 mb-5"},r.a.createElement("div",{className:"card-header"},"3 - Enviar con Mailjet"),this.state.step>2&&r.a.createElement(w,{stepChange:this.stepChange})),r.a.createElement("br",null)))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.05e62cdd.chunk.js.map